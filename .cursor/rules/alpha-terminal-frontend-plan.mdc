# ğŸ¯ ALPHA TERMINAL - Frontend Architecture Plan

## Mission Statement
Build a **REAL-TIME INSTITUTIONAL INTELLIGENCE DASHBOARD** that makes Bloomberg Terminal look like a fucking calculator from 1985. Our terminal will be:
- **Beautiful** - Dark mode, neon accents, cinematic feel
- **Fast** - Sub-second updates, WebSocket-powered
- **Intelligent** - AI-driven insights, not just data vomit
- **Actionable** - Every pixel leads to a trade decision

---

## ğŸ—ï¸ ARCHITECTURE OVERVIEW

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ALPHA TERMINAL                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚   MARKET    â”‚  â”‚   SIGNALS   â”‚  â”‚  DARK POOL  â”‚  â”‚   GAMMA     â”‚        â”‚
â”‚  â”‚  OVERVIEW   â”‚  â”‚   CENTER    â”‚  â”‚   FLOW      â”‚  â”‚   TRACKER   â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚   SQUEEZE   â”‚  â”‚   OPTIONS   â”‚  â”‚   REDDIT    â”‚  â”‚   MACRO     â”‚        â”‚
â”‚  â”‚   SCANNER   â”‚  â”‚   FLOW      â”‚  â”‚  SENTIMENT  â”‚  â”‚   INTEL     â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚                    NARRATIVE BRAIN (AI SYNTHESIS)                â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           BACKEND SERVICES                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  FastAPI    â”‚  â”‚  WebSocket  â”‚  â”‚   Redis     â”‚  â”‚  PostgreSQL â”‚        â”‚
â”‚  â”‚  REST API   â”‚  â”‚   Server    â”‚  â”‚   Cache     â”‚  â”‚   Database  â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚              UNIFIED ALPHA MONITOR (Existing Backend)            â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¦ TECH STACK

### Frontend
| Component | Technology | Why |
|-----------|------------|-----|
| Framework | **Next.js 14** (App Router) | Server components, streaming, edge runtime |
| UI Library | **Tailwind CSS** + **shadcn/ui** | Beautiful, fast, customizable |
| Charts | **TradingView Lightweight Charts** + **Recharts** | Professional trading charts |
| State | **Zustand** | Simple, fast, scalable |
| Real-time | **Socket.io Client** | WebSocket with fallbacks |
| Animations | **Framer Motion** | Smooth, cinematic transitions |
| Icons | **Lucide React** | Clean, consistent iconography |

### Backend API Layer
| Component | Technology | Why |
|-----------|------------|-----|
| API Framework | **FastAPI** | Async, fast, auto-docs |
| WebSocket | **FastAPI WebSockets** + **Redis Pub/Sub** | Real-time broadcast |
| Cache | **Redis** | Sub-millisecond reads |
| Database | **PostgreSQL** + **TimescaleDB** | Time-series optimized |
| Task Queue | **Celery** + **Redis** | Background processing |
| Auth | **JWT** + **OAuth2** | Secure, stateless |

### Infrastructure
| Component | Technology | Why |
|-----------|------------|-----|
| Hosting | **Vercel** (Frontend) + **Render/Railway** (Backend) | Easy deployment |
| CDN | **Vercel Edge** | Global, fast |
| Monitoring | **Sentry** + **Prometheus** | Error tracking, metrics |
| Logging | **Loguru** + **Loki** | Structured logging |

---

## ğŸ¨ DESIGN SYSTEM

### Color Palette (Dark Mode First)
```css
:root {
  /* Background Layers */
  --bg-primary: #0a0a0f;      /* Deepest black */
  --bg-secondary: #12121a;    /* Card backgrounds */
  --bg-tertiary: #1a1a25;     /* Elevated surfaces */
  --bg-hover: #22222f;        /* Hover states */
  
  /* Accent Colors */
  --accent-green: #00ff88;    /* Bullish, success */
  --accent-red: #ff3366;      /* Bearish, danger */
  --accent-blue: #00d4ff;     /* Neutral, info */
  --accent-purple: #a855f7;   /* AI/Synthesis */
  --accent-orange: #ff9500;   /* Warning, attention */
  --accent-gold: #ffd700;     /* Premium, signals */
  
  /* Text */
  --text-primary: #ffffff;
  --text-secondary: #a0a0b0;
  --text-muted: #606070;
  
  /* Borders */
  --border-subtle: #2a2a35;
  --border-active: #3a3a45;
  
  /* Glow Effects */
  --glow-green: 0 0 20px rgba(0, 255, 136, 0.3);
  --glow-red: 0 0 20px rgba(255, 51, 102, 0.3);
  --glow-blue: 0 0 20px rgba(0, 212, 255, 0.3);
}
```

### Typography
```css
/* Font Stack */
--font-mono: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace;
--font-sans: 'Inter', 'SF Pro Display', system-ui, sans-serif;
--font-display: 'Space Grotesk', 'Inter', sans-serif;

/* Sizes */
--text-xs: 0.75rem;    /* 12px - labels, metadata */
--text-sm: 0.875rem;   /* 14px - body, tables */
--text-base: 1rem;     /* 16px - default */
--text-lg: 1.125rem;   /* 18px - headings */
--text-xl: 1.25rem;    /* 20px - section titles */
--text-2xl: 1.5rem;    /* 24px - page titles */
--text-3xl: 2rem;      /* 32px - hero numbers */
```

### Component Patterns
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š CARD TITLE            â‹® Actions â”‚  â† Header with menu
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚         MAIN CONTENT                â”‚  â† Content area
â”‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Updated 2s ago          View More â†’ â”‚  â† Footer with timestamp
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“± DASHBOARD LAYOUTS

### Main Dashboard (360Â° View)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¯ ALPHA TERMINAL                    SPY $665.20 â–²0.45%    QQQ $520.10 â–²0.62%   â”‚
â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚     MARKET OVERVIEW        â”‚ â”‚     ACTIVE SIGNALS         â”‚ â”‚  QUICK STATS   â”‚ â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚                â”‚ â”‚
â”‚ â”‚  â”‚    SPY CHART         â”‚  â”‚ â”‚  â”‚ ğŸ”¥ SQUEEZE: GME     â”‚  â”‚ â”‚ Signals: 12    â”‚ â”‚
â”‚ â”‚  â”‚    [TradingView]     â”‚  â”‚ â”‚  â”‚    Score: 85/100    â”‚  â”‚ â”‚ Master: 3      â”‚ â”‚
â”‚ â”‚  â”‚                      â”‚  â”‚ â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚ â”‚ Win Rate: 67%  â”‚ â”‚
â”‚ â”‚  â”‚                      â”‚  â”‚ â”‚  â”‚ ğŸ² GAMMA: SPY       â”‚  â”‚ â”‚                â”‚ â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚  â”‚    Direction: UP    â”‚  â”‚ â”‚ DP Levels: 8   â”‚ â”‚
â”‚ â”‚  VIX: 14.2  Vol: 45M       â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚ Battlegrounds  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚     DARK POOL FLOW         â”‚ â”‚     OPTIONS FLOW           â”‚ â”‚  REDDIT PULSE  â”‚ â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚  P/C Ratio: 0.85          â”‚ â”‚                â”‚ â”‚
â”‚ â”‚  â”‚ $665.50  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 2.1Mâ”‚  â”‚ â”‚  Max Pain: $660           â”‚ â”‚ ğŸš€ TSLA: +47%  â”‚ â”‚
â”‚ â”‚  â”‚ $664.00  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   1.5Mâ”‚  â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ ğŸ“‰ NVDA: -12%  â”‚ â”‚
â”‚ â”‚  â”‚ $662.75  â–ˆâ–ˆâ–ˆâ–ˆ     0.8Mâ”‚  â”‚ â”‚  â”‚   CALL OI HEATMAP    â”‚ â”‚ â”‚ âš ï¸ GME: SURGE  â”‚ â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚                â”‚ â”‚
â”‚ â”‚  DP%: 42% | Buying: 65%    â”‚ â”‚  Gamma Flip: $658          â”‚ â”‚ Velocity: 2.3x â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚                        ğŸ§  NARRATIVE BRAIN                                   â”‚   â”‚
â”‚ â”‚  "SPY testing major DP resistance at $665.50 with 2.1M shares. Gamma       â”‚   â”‚
â”‚ â”‚   flip at $658 suggests dealers are long gamma above. FOMC tomorrow        â”‚   â”‚
â”‚ â”‚   creates binary event risk. RECOMMENDATION: Wait for DP resolution."      â”‚   â”‚
â”‚ â”‚                                                                    75% â–ˆâ–ˆâ–ˆâ–ˆâ”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ§© COMPONENT SPECIFICATIONS

### 1. MARKET OVERVIEW WIDGET

**Purpose:** Real-time price action with institutional context

**Data Sources:**
- `yfinance` / Yahoo Finance API (price, volume)
- ChartExchange API (DP levels overlay)
- Internal: RegimeDetector output

**Refresh Rate:** 
- Price: 1 second (WebSocket)
- Chart: 5 seconds (REST + incremental)
- Regime: 30 seconds

**Component Structure:**
```typescript
interface MarketOverviewProps {
  symbol: string;
  timeframe: '1m' | '5m' | '15m' | '1h' | '1d';
  showDPLevels: boolean;
  showGammaLevels: boolean;
  showVWAP: boolean;
}

interface MarketData {
  price: number;
  change: number;
  changePercent: number;
  volume: number;
  avgVolume: number;
  high: number;
  low: number;
  open: number;
  vwap: number;
  regime: 'UPTREND' | 'DOWNTREND' | 'CHOP' | 'BREAKOUT';
}
```

**Visual Elements:**
- TradingView Lightweight Chart (candlestick)
- DP Level overlays (horizontal lines with volume labels)
- Gamma flip level (dashed line)
- VWAP line
- Volume bars with institutional highlighting
- Regime indicator badge

**API Endpoints:**
```
GET  /api/market/{symbol}/quote          â†’ Real-time quote
GET  /api/market/{symbol}/candles        â†’ Historical candles
WS   /ws/market/{symbol}                 â†’ Live price stream
GET  /api/market/{symbol}/dp-levels      â†’ Dark pool levels
GET  /api/market/{symbol}/gamma-levels   â†’ Gamma exposure levels
```

---

### 2. ACTIVE SIGNALS CENTER

**Purpose:** Display all active trading signals with priority ranking

**Data Sources:**
- Internal: SignalGenerator output
- Internal: All checker outputs (squeeze, gamma, DP, etc.)

**Refresh Rate:**
- Signals: Real-time via WebSocket
- Signal status: 10 seconds

**Component Structure:**
```typescript
interface Signal {
  id: string;
  symbol: string;
  type: SignalType;
  action: 'LONG' | 'SHORT' | 'AVOID' | 'WATCH';
  confidence: number;  // 0-100
  entryPrice: number;
  stopPrice: number;
  targetPrice: number;
  riskReward: number;
  reasoning: string[];
  warnings: string[];
  timestamp: Date;
  source: string;  // Which checker generated it
  isMaster: boolean;  // 75%+ confidence
}

type SignalType = 
  | 'SQUEEZE' | 'GAMMA_RAMP' | 'BREAKOUT' | 'BOUNCE'
  | 'SELLOFF' | 'RALLY' | 'GAP_BREAKOUT' | 'GAP_FILL'
  | 'CALL_ACCUMULATION' | 'PUT_ACCUMULATION';
```

**Visual Elements:**
- Signal cards with color-coded borders (green=bullish, red=bearish)
- Confidence meter (progress bar)
- Entry/Stop/Target visualization
- Countdown timer (for time-sensitive signals)
- "Master Signal" badge for 75%+
- Expand/collapse for reasoning

**API Endpoints:**
```
GET  /api/signals                        â†’ All active signals
GET  /api/signals/master                 â†’ Master signals only (75%+)
GET  /api/signals/{id}                   â†’ Single signal details
WS   /ws/signals                         â†’ Live signal stream
POST /api/signals/{id}/acknowledge       â†’ Mark signal as seen
```

---

### 3. DARK POOL FLOW WIDGET

**Purpose:** Visualize institutional dark pool activity and battlegrounds

**Data Sources:**
- ChartExchange API (DP levels, prints)
- Internal: DPMonitorEngine output

**Refresh Rate:**
- Levels: 1 minute
- Prints: Real-time via WebSocket (when available)
- Battleground status: 30 seconds

**Component Structure:**
```typescript
interface DarkPoolLevel {
  price: number;
  volume: number;
  type: 'SUPPORT' | 'RESISTANCE';
  strength: 'WEAK' | 'MODERATE' | 'STRONG' | 'BATTLEGROUND';
  touches: number;
  lastTouch: Date;
}

interface DarkPoolPrint {
  price: number;
  volume: number;
  side: 'BUY' | 'SELL' | 'UNKNOWN';
  timestamp: Date;
  exchange: string;
}

interface DarkPoolSummary {
  totalVolume: number;
  dpPercent: number;  // % of total volume
  buyingPressure: number;  // 0-100
  nearestSupport: DarkPoolLevel;
  nearestResistance: DarkPoolLevel;
  battlegrounds: DarkPoolLevel[];
}
```

**Visual Elements:**
- Horizontal bar chart of DP levels (price vs volume)
- Color coding: Green=support, Red=resistance, Gold=battleground
- Current price indicator
- Buy/Sell pressure gauge
- Recent prints feed (scrolling)
- Distance to nearest levels (% and $)

**API Endpoints:**
```
GET  /api/darkpool/{symbol}/levels       â†’ DP levels
GET  /api/darkpool/{symbol}/prints       â†’ Recent prints
GET  /api/darkpool/{symbol}/summary      â†’ Aggregated metrics
WS   /ws/darkpool/{symbol}               â†’ Live DP stream
```

---

### 4. GAMMA TRACKER WIDGET

**Purpose:** Options-derived gamma exposure and max pain analysis

**Data Sources:**
- yfinance / Options chain data
- Internal: GammaExposureTracker output

**Refresh Rate:**
- Gamma levels: 5 minutes
- Max pain: 15 minutes (changes slowly)
- P/C ratio: 1 minute

**Component Structure:**
```typescript
interface GammaData {
  symbol: string;
  expiration: string;
  maxPain: number;
  maxPainDistance: number;  // % from current price
  gammaFlipLevel: number;
  currentRegime: 'POSITIVE' | 'NEGATIVE';
  totalCallOI: number;
  totalPutOI: number;
  putCallRatio: number;
  gammaByStrike: Record<number, number>;
  dealerPosition: 'LONG_GAMMA' | 'SHORT_GAMMA';
}
```

**Visual Elements:**
- Gamma exposure chart (strike vs GEX)
- Max pain indicator with distance
- P/C ratio gauge
- Gamma flip level line
- OI heatmap by strike
- Expiration selector tabs

**API Endpoints:**
```
GET  /api/gamma/{symbol}                 â†’ Current gamma data
GET  /api/gamma/{symbol}/history         â†’ Historical gamma
GET  /api/gamma/{symbol}/expirations     â†’ Available expirations
WS   /ws/gamma/{symbol}                  â†’ Live gamma updates
```

---

### 5. SQUEEZE SCANNER WIDGET

**Purpose:** Identify and track short squeeze candidates

**Data Sources:**
- ChartExchange API (short interest, borrow fees)
- Internal: SqueezeDetector output

**Refresh Rate:**
- Scanner: 1 hour (during RTH)
- Individual signals: Real-time when generated

**Component Structure:**
```typescript
interface SqueezeCandidate {
  symbol: string;
  score: number;  // 0-100
  shortInterest: number;  // %
  borrowFee: number;  // %
  daysTocover: number;
  ftdSpike: number;  // ratio
  dpSupport: number;  // buying pressure %
  priceChange5d: number;
  volumeRatio: number;
  reasoning: string[];
  warnings: string[];
}
```

**Visual Elements:**
- Sortable table of candidates
- Score badge with color gradient
- Sparkline charts (5-day price)
- Key metrics columns
- Filter controls (min score, min SI%, etc.)
- Click to expand for full analysis

**API Endpoints:**
```
GET  /api/squeeze/scan                   â†’ Run scanner
GET  /api/squeeze/candidates             â†’ Current candidates
GET  /api/squeeze/{symbol}               â†’ Single symbol analysis
WS   /ws/squeeze                         â†’ Live squeeze alerts
```

---

### 6. OPTIONS FLOW WIDGET

**Purpose:** Track unusual options activity and institutional positioning

**Data Sources:**
- yfinance (delayed options data)
- Future: Premium API for real-time sweeps

**Refresh Rate:**
- Flow data: 5 minutes
- Signals: Real-time via WebSocket

**Component Structure:**
```typescript
interface OptionsFlow {
  symbol: string;
  putCallRatio: number;
  maxPain: number;
  totalCallVolume: number;
  totalPutVolume: number;
  unusualActivity: UnusualOption[];
  sentiment: 'BULLISH' | 'BEARISH' | 'NEUTRAL';
}

interface UnusualOption {
  strike: number;
  expiration: string;
  type: 'CALL' | 'PUT';
  volume: number;
  openInterest: number;
  volumeOIRatio: number;
  premium: number;
  side: 'BUY' | 'SELL';
  isUnusual: boolean;
}
```

**Visual Elements:**
- P/C ratio gauge with historical comparison
- Max pain vs current price visualization
- Unusual activity feed (scrolling)
- OI by strike heatmap
- Volume vs OI chart
- Sentiment indicator

**API Endpoints:**
```
GET  /api/options/{symbol}/flow          â†’ Options flow data
GET  /api/options/{symbol}/unusual       â†’ Unusual activity
GET  /api/options/{symbol}/chain         â†’ Full options chain
WS   /ws/options/{symbol}                â†’ Live options updates
```

---

### 7. REDDIT SENTIMENT WIDGET

**Purpose:** Track retail sentiment and identify contrarian opportunities

**Data Sources:**
- ChartExchange API (Reddit mentions)
- Internal: RedditExploiter output

**Refresh Rate:**
- Mentions: 1 hour
- Signals: Real-time via WebSocket

**Component Structure:**
```typescript
interface RedditSentiment {
  symbol: string;
  totalMentions: number;
  mentionChange24h: number;  // %
  avgSentiment: number;  // -1 to 1
  wsbMentions: number;
  velocity: number;  // mentions per hour
  signalType: RedditSignalType;
  action: 'LONG' | 'SHORT' | 'AVOID' | 'WATCH';
  dpEnhanced: boolean;
  enhancementReasons: string[];
}

type RedditSignalType = 
  | 'VELOCITY_SURGE' | 'SENTIMENT_FLIP' | 'CONFIRMED_MOMENTUM'
  | 'PUMP_DUMP_RISK' | 'STEALTH_ACCUMULATION';
```

**Visual Elements:**
- Mention count with trend arrow
- Sentiment gauge (-100 to +100)
- Velocity sparkline
- Signal type badge
- DP synthesis indicator
- Top mentioned tickers list

**API Endpoints:**
```
GET  /api/reddit/{symbol}                â†’ Symbol sentiment
GET  /api/reddit/trending                â†’ Trending tickers
GET  /api/reddit/signals                 â†’ Active Reddit signals
WS   /ws/reddit                          â†’ Live Reddit updates
```

---

### 8. MACRO INTELLIGENCE WIDGET

**Purpose:** Track Fed, Trump, and economic events

**Data Sources:**
- Internal: FedChecker, TrumpChecker, EconomicChecker outputs

**Refresh Rate:**
- Fed: 5 minutes
- Trump: 3 minutes
- Economic: 1 hour

**Component Structure:**
```typescript
interface MacroIntelligence {
  fed: {
    nextMeeting: Date;
    rateExpectation: string;
    recentStatements: FedStatement[];
    sentiment: 'HAWKISH' | 'DOVISH' | 'NEUTRAL';
  };
  trump: {
    recentActivity: TrumpActivity[];
    marketImpact: 'BULLISH' | 'BEARISH' | 'NEUTRAL';
    affectedSectors: string[];
  };
  economic: {
    upcomingEvents: EconomicEvent[];
    recentReleases: EconomicRelease[];
    surpriseIndex: number;
  };
}
```

**Visual Elements:**
- Event calendar with countdown
- Fed dot plot visualization
- Trump activity feed
- Economic surprise chart
- Impact indicators by sector

**API Endpoints:**
```
GET  /api/macro/fed                      â†’ Fed intelligence
GET  /api/macro/trump                    â†’ Trump intelligence
GET  /api/macro/economic                 â†’ Economic calendar
GET  /api/macro/summary                  â†’ Combined macro view
WS   /ws/macro                           â†’ Live macro updates
```

---

### 9. NARRATIVE BRAIN WIDGET

**Purpose:** AI-synthesized market narrative and recommendations

**Data Sources:**
- Internal: NarrativeBrain output
- All other widget data (synthesized)

**Refresh Rate:**
- Narrative: 1 minute
- Full synthesis: 5 minutes

**Component Structure:**
```typescript
interface NarrativeSynthesis {
  timestamp: Date;
  narrative: string;  // Human-readable market story
  confidence: number;
  marketBias: 'BULLISH' | 'BEARISH' | 'NEUTRAL' | 'UNCERTAIN';
  keyFactors: {
    factor: string;
    impact: 'POSITIVE' | 'NEGATIVE' | 'NEUTRAL';
    weight: number;
  }[];
  recommendation: {
    action: string;
    reasoning: string;
    riskLevel: 'LOW' | 'MEDIUM' | 'HIGH';
  };
  alerts: string[];
}
```

**Visual Elements:**
- Large narrative text block (typewriter effect)
- Confidence meter
- Key factors breakdown (weighted list)
- Recommendation card
- Alert badges
- "Ask AI" input for questions

**API Endpoints:**
```
GET  /api/narrative/current              â†’ Current narrative
GET  /api/narrative/history              â†’ Historical narratives
POST /api/narrative/ask                  â†’ Ask AI a question
WS   /ws/narrative                       â†’ Live narrative updates
```

---

## ğŸ”Œ BACKEND API LAYER

### FastAPI Application Structure

```
backend/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main.py                 # FastAPI app entry point
â”‚   â”œâ”€â”€ config.py               # Configuration
â”‚   â”œâ”€â”€ dependencies.py         # Dependency injection
â”‚   â”‚
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ v1/
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ market.py       # Market data endpoints
â”‚   â”‚   â”‚   â”œâ”€â”€ signals.py      # Signals endpoints
â”‚   â”‚   â”‚   â”œâ”€â”€ darkpool.py     # Dark pool endpoints
â”‚   â”‚   â”‚   â”œâ”€â”€ gamma.py        # Gamma endpoints
â”‚   â”‚   â”‚   â”œâ”€â”€ squeeze.py      # Squeeze endpoints
â”‚   â”‚   â”‚   â”œâ”€â”€ options.py      # Options flow endpoints
â”‚   â”‚   â”‚   â”œâ”€â”€ reddit.py       # Reddit sentiment endpoints
â”‚   â”‚   â”‚   â”œâ”€â”€ macro.py        # Macro intelligence endpoints
â”‚   â”‚   â”‚   â””â”€â”€ narrative.py    # Narrative brain endpoints
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ websocket/
â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚       â”œâ”€â”€ manager.py      # WebSocket connection manager
â”‚   â”‚       â”œâ”€â”€ market_ws.py    # Market data WebSocket
â”‚   â”‚       â”œâ”€â”€ signals_ws.py   # Signals WebSocket
â”‚   â”‚       â””â”€â”€ unified_ws.py   # Unified stream WebSocket
â”‚   â”‚
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ security.py         # JWT, auth
â”‚   â”‚   â”œâ”€â”€ cache.py            # Redis cache
â”‚   â”‚   â””â”€â”€ database.py         # PostgreSQL connection
â”‚   â”‚
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ market.py           # Market data models
â”‚   â”‚   â”œâ”€â”€ signal.py           # Signal models
â”‚   â”‚   â””â”€â”€ user.py             # User models
â”‚   â”‚
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ market_service.py   # Market data service
â”‚   â”‚   â”œâ”€â”€ signal_service.py   # Signal aggregation service
â”‚   â”‚   â””â”€â”€ cache_service.py    # Cache management
â”‚   â”‚
â”‚   â””â”€â”€ integrations/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ unified_monitor.py  # Bridge to existing monitor
â”‚       â”œâ”€â”€ chartexchange.py    # ChartExchange client
â”‚       â””â”€â”€ yfinance.py         # yfinance wrapper
â”‚
â”œâ”€â”€ tests/
â”œâ”€â”€ alembic/                    # Database migrations
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ Dockerfile
â””â”€â”€ docker-compose.yml
```

### WebSocket Architecture

```python
# backend/app/api/websocket/manager.py

class ConnectionManager:
    """
    Manages WebSocket connections with Redis pub/sub for scaling
    """
    def __init__(self):
        self.active_connections: Dict[str, List[WebSocket]] = {}
        self.redis = Redis()
    
    async def connect(self, websocket: WebSocket, channel: str):
        await websocket.accept()
        if channel not in self.active_connections:
            self.active_connections[channel] = []
        self.active_connections[channel].append(websocket)
    
    async def broadcast(self, channel: str, message: dict):
        """Broadcast to all connections on a channel"""
        if channel in self.active_connections:
            for connection in self.active_connections[channel]:
                await connection.send_json(message)
        
        # Also publish to Redis for multi-instance support
        await self.redis.publish(channel, json.dumps(message))
```

### Caching Strategy

```python
# Cache TTLs by data type
CACHE_TTL = {
    'market_quote': 1,          # 1 second
    'market_candles': 5,        # 5 seconds
    'dp_levels': 60,            # 1 minute
    'dp_prints': 30,            # 30 seconds
    'gamma_data': 300,          # 5 minutes
    'squeeze_scan': 3600,       # 1 hour
    'reddit_sentiment': 3600,   # 1 hour
    'macro_data': 300,          # 5 minutes
    'narrative': 60,            # 1 minute
}
```

---

## ğŸ–¥ï¸ FRONTEND STRUCTURE

```
frontend/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ layout.tsx              # Root layout
â”‚   â”œâ”€â”€ page.tsx                # Dashboard home
â”‚   â”œâ”€â”€ globals.css             # Global styles
â”‚   â”‚
â”‚   â”œâ”€â”€ (dashboard)/
â”‚   â”‚   â”œâ”€â”€ layout.tsx          # Dashboard layout
â”‚   â”‚   â”œâ”€â”€ page.tsx            # Main 360Â° view
â”‚   â”‚   â”œâ”€â”€ signals/
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx        # Signals deep dive
â”‚   â”‚   â”œâ”€â”€ darkpool/
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx        # Dark pool analysis
â”‚   â”‚   â”œâ”€â”€ gamma/
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx        # Gamma analysis
â”‚   â”‚   â”œâ”€â”€ squeeze/
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx        # Squeeze scanner
â”‚   â”‚   â”œâ”€â”€ options/
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx        # Options flow
â”‚   â”‚   â”œâ”€â”€ reddit/
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx        # Reddit sentiment
â”‚   â”‚   â””â”€â”€ macro/
â”‚   â”‚       â””â”€â”€ page.tsx        # Macro intelligence
â”‚   â”‚
â”‚   â””â”€â”€ api/                    # Next.js API routes (proxy)
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/                     # shadcn/ui components
â”‚   â”‚   â”œâ”€â”€ button.tsx
â”‚   â”‚   â”œâ”€â”€ card.tsx
â”‚   â”‚   â”œâ”€â”€ badge.tsx
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ widgets/
â”‚   â”‚   â”œâ”€â”€ MarketOverview.tsx
â”‚   â”‚   â”œâ”€â”€ SignalsCenter.tsx
â”‚   â”‚   â”œâ”€â”€ DarkPoolFlow.tsx
â”‚   â”‚   â”œâ”€â”€ GammaTracker.tsx
â”‚   â”‚   â”œâ”€â”€ SqueezeScanner.tsx
â”‚   â”‚   â”œâ”€â”€ OptionsFlow.tsx
â”‚   â”‚   â”œâ”€â”€ RedditSentiment.tsx
â”‚   â”‚   â”œâ”€â”€ MacroIntel.tsx
â”‚   â”‚   â””â”€â”€ NarrativeBrain.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ charts/
â”‚   â”‚   â”œâ”€â”€ TradingViewChart.tsx
â”‚   â”‚   â”œâ”€â”€ GammaChart.tsx
â”‚   â”‚   â”œâ”€â”€ HeatMap.tsx
â”‚   â”‚   â””â”€â”€ Sparkline.tsx
â”‚   â”‚
â”‚   â””â”€â”€ layout/
â”‚       â”œâ”€â”€ Header.tsx
â”‚       â”œâ”€â”€ Sidebar.tsx
â”‚       â”œâ”€â”€ WidgetGrid.tsx
â”‚       â””â”€â”€ Footer.tsx
â”‚
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useWebSocket.ts         # WebSocket hook
â”‚   â”œâ”€â”€ useMarketData.ts        # Market data hook
â”‚   â”œâ”€â”€ useSignals.ts           # Signals hook
â”‚   â””â”€â”€ useInterval.ts          # Polling hook
â”‚
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ api.ts                  # API client
â”‚   â”œâ”€â”€ websocket.ts            # WebSocket client
â”‚   â”œâ”€â”€ utils.ts                # Utility functions
â”‚   â””â”€â”€ formatters.ts           # Data formatters
â”‚
â”œâ”€â”€ stores/
â”‚   â”œâ”€â”€ marketStore.ts          # Market data store
â”‚   â”œâ”€â”€ signalStore.ts          # Signals store
â”‚   â””â”€â”€ settingsStore.ts        # User settings store
â”‚
â”œâ”€â”€ types/
â”‚   â”œâ”€â”€ market.ts
â”‚   â”œâ”€â”€ signal.ts
â”‚   â”œâ”€â”€ darkpool.ts
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ styles/
â”‚   â””â”€â”€ themes/
â”‚       â””â”€â”€ dark.css
â”‚
â”œâ”€â”€ public/
â”‚   â””â”€â”€ assets/
â”‚
â”œâ”€â”€ package.json
â”œâ”€â”€ tailwind.config.js
â”œâ”€â”€ next.config.js
â””â”€â”€ tsconfig.json
```

---

## ğŸ”„ REAL-TIME DATA FLOW

### WebSocket Message Types

```typescript
// Unified WebSocket message format
interface WSMessage {
  type: MessageType;
  channel: string;
  data: any;
  timestamp: string;
}

type MessageType = 
  | 'MARKET_QUOTE'      // Price update
  | 'MARKET_CANDLE'     // New candle
  | 'SIGNAL_NEW'        // New signal generated
  | 'SIGNAL_UPDATE'     // Signal status update
  | 'SIGNAL_EXPIRED'    // Signal expired/closed
  | 'DP_LEVEL'          // DP level update
  | 'DP_PRINT'          // New DP print
  | 'GAMMA_UPDATE'      // Gamma data update
  | 'SQUEEZE_ALERT'     // Squeeze detected
  | 'REDDIT_ALERT'      // Reddit signal
  | 'MACRO_EVENT'       // Macro event
  | 'NARRATIVE_UPDATE'  // New narrative
  | 'SYSTEM_STATUS';    // System health
```

### Client-Side WebSocket Hook

```typescript
// hooks/useWebSocket.ts
export function useWebSocket(channels: string[]) {
  const [connected, setConnected] = useState(false);
  const [messages, setMessages] = useState<Map<string, any>>(new Map());
  
  useEffect(() => {
    const ws = new WebSocket(WS_URL);
    
    ws.onopen = () => {
      setConnected(true);
      // Subscribe to channels
      ws.send(JSON.stringify({ 
        type: 'SUBSCRIBE', 
        channels 
      }));
    };
    
    ws.onmessage = (event) => {
      const msg: WSMessage = JSON.parse(event.data);
      setMessages(prev => new Map(prev).set(msg.channel, msg.data));
    };
    
    return () => ws.close();
  }, [channels]);
  
  return { connected, messages };
}
```

### Backend WebSocket Publisher

```python
# Integration with existing UnifiedAlphaMonitor
class WebSocketPublisher:
    """
    Publishes events from UnifiedAlphaMonitor to WebSocket clients
    """
    def __init__(self, redis_client):
        self.redis = redis_client
    
    async def publish_signal(self, signal: LiveSignal):
        """Publish new signal to WebSocket"""
        await self.redis.publish('signals', json.dumps({
            'type': 'SIGNAL_NEW',
            'channel': 'signals',
            'data': signal.to_dict(),
            'timestamp': datetime.utcnow().isoformat()
        }))
    
    async def publish_market_update(self, symbol: str, quote: dict):
        """Publish market quote update"""
        await self.redis.publish(f'market:{symbol}', json.dumps({
            'type': 'MARKET_QUOTE',
            'channel': f'market:{symbol}',
            'data': quote,
            'timestamp': datetime.utcnow().isoformat()
        }))
```

---

## ğŸ“Š DATABASE SCHEMA

### PostgreSQL + TimescaleDB

```sql
-- Signals table (hypertable for time-series)
CREATE TABLE signals (
    id SERIAL,
    symbol VARCHAR(10) NOT NULL,
    signal_type VARCHAR(50) NOT NULL,
    action VARCHAR(10) NOT NULL,
    confidence DECIMAL(5,2) NOT NULL,
    entry_price DECIMAL(10,2),
    stop_price DECIMAL(10,2),
    target_price DECIMAL(10,2),
    reasoning JSONB,
    warnings JSONB,
    source VARCHAR(50),
    is_master BOOLEAN DEFAULT FALSE,
    status VARCHAR(20) DEFAULT 'ACTIVE',
    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
    updated_at TIMESTAMPTZ,
    closed_at TIMESTAMPTZ,
    outcome VARCHAR(20),  -- WIN, LOSS, EXPIRED
    PRIMARY KEY (id, created_at)
);

SELECT create_hypertable('signals', 'created_at');

-- Dark pool levels (daily snapshots)
CREATE TABLE dp_levels (
    id SERIAL,
    symbol VARCHAR(10) NOT NULL,
    price DECIMAL(10,2) NOT NULL,
    volume BIGINT NOT NULL,
    level_type VARCHAR(20),  -- SUPPORT, RESISTANCE
    strength VARCHAR(20),    -- WEAK, MODERATE, STRONG, BATTLEGROUND
    date DATE NOT NULL,
    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
    PRIMARY KEY (id, created_at)
);

SELECT create_hypertable('dp_levels', 'created_at');

-- Market data (1-minute candles)
CREATE TABLE market_candles (
    symbol VARCHAR(10) NOT NULL,
    timestamp TIMESTAMPTZ NOT NULL,
    open DECIMAL(10,2),
    high DECIMAL(10,2),
    low DECIMAL(10,2),
    close DECIMAL(10,2),
    volume BIGINT,
    PRIMARY KEY (symbol, timestamp)
);

SELECT create_hypertable('market_candles', 'timestamp');

-- User preferences
CREATE TABLE users (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    email VARCHAR(255) UNIQUE NOT NULL,
    password_hash VARCHAR(255),
    settings JSONB DEFAULT '{}',
    created_at TIMESTAMPTZ DEFAULT NOW(),
    last_login TIMESTAMPTZ
);

-- Alert history
CREATE TABLE alert_history (
    id SERIAL PRIMARY KEY,
    user_id UUID REFERENCES users(id),
    signal_id INT,
    alert_type VARCHAR(50),
    channel VARCHAR(50),  -- DISCORD, EMAIL, PUSH
    sent_at TIMESTAMPTZ DEFAULT NOW(),
    acknowledged_at TIMESTAMPTZ
);

-- Indexes
CREATE INDEX idx_signals_symbol ON signals (symbol, created_at DESC);
CREATE INDEX idx_signals_type ON signals (signal_type, created_at DESC);
CREATE INDEX idx_dp_levels_symbol ON dp_levels (symbol, date DESC);
CREATE INDEX idx_market_candles_symbol ON market_candles (symbol, timestamp DESC);
```

---

## ğŸš€ DEPLOYMENT ARCHITECTURE

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              PRODUCTION                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚    Vercel       â”‚     â”‚    Render       â”‚     â”‚    Render       â”‚       â”‚
â”‚  â”‚   (Frontend)    â”‚â”€â”€â”€â”€â–¶â”‚   (FastAPI)     â”‚â”€â”€â”€â”€â–¶â”‚   (Monitor)     â”‚       â”‚
â”‚  â”‚   Next.js 14    â”‚     â”‚   REST + WS     â”‚     â”‚   Background    â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚           â”‚                      â”‚                       â”‚                  â”‚
â”‚           â”‚                      â–¼                       â”‚                  â”‚
â”‚           â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚                  â”‚
â”‚           â”‚              â”‚     Redis       â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚           â”‚              â”‚   (Upstash)     â”‚                                â”‚
â”‚           â”‚              â”‚   Cache + PubSubâ”‚                                â”‚
â”‚           â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â”‚           â”‚                      â”‚                                          â”‚
â”‚           â”‚                      â–¼                                          â”‚
â”‚           â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚           â”‚              â”‚   PostgreSQL    â”‚                                â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   (Neon/Supabase)â”‚                               â”‚
â”‚                          â”‚   + TimescaleDB â”‚                                â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Environment Variables

```bash
# Frontend (.env.local)
NEXT_PUBLIC_API_URL=https://api.alpha-terminal.com
NEXT_PUBLIC_WS_URL=wss://api.alpha-terminal.com/ws

# Backend (.env)
DATABASE_URL=postgresql://...
REDIS_URL=redis://...
CHARTEXCHANGE_API_KEY=...
JWT_SECRET=...
DISCORD_WEBHOOK_URL=...
```

---

## ğŸ“‹ IMPLEMENTATION PHASES

### Phase 1: Foundation (Week 1-2)
- [ ] Set up Next.js 14 project with Tailwind + shadcn/ui
- [ ] Create design system (colors, typography, components)
- [ ] Build basic layout (header, sidebar, widget grid)
- [ ] Set up FastAPI backend with basic endpoints
- [ ] Implement Redis caching layer
- [ ] Create PostgreSQL schema with TimescaleDB

### Phase 2: Core Widgets (Week 3-4)
- [ ] Market Overview widget with TradingView chart
- [ ] Signals Center widget with real-time updates
- [ ] Dark Pool Flow widget with level visualization
- [ ] WebSocket infrastructure (client + server)

### Phase 3: Advanced Widgets (Week 5-6)
- [ ] Gamma Tracker widget with GEX chart
- [ ] Squeeze Scanner widget with sortable table
- [ ] Options Flow widget with heatmap
- [ ] Reddit Sentiment widget

### Phase 4: Intelligence Layer (Week 7-8)
- [ ] Macro Intelligence widget
- [ ] Narrative Brain widget with AI synthesis
- [ ] Cross-widget data integration
- [ ] Alert system (push notifications)

### Phase 5: Polish & Deploy (Week 9-10)
- [ ] Performance optimization
- [ ] Mobile responsiveness
- [ ] Error handling and fallbacks
- [ ] Testing (unit, integration, e2e)
- [ ] Production deployment
- [ ] Documentation

---

## ğŸ¯ SUCCESS METRICS

### Performance Targets
- **Initial Load:** < 2 seconds
- **WebSocket Latency:** < 100ms
- **API Response:** < 200ms (p95)
- **Chart Render:** < 500ms
- **Memory Usage:** < 200MB (client)

### User Experience
- **Real-time feel:** Updates within 1 second
- **Zero data loss:** All signals visible
- **Intuitive navigation:** < 3 clicks to any data
- **Mobile usable:** Responsive on tablets

### Business Metrics
- **Uptime:** 99.9%
- **Signal accuracy:** Track win/loss rates
- **User engagement:** Time on dashboard
- **Alert response:** Time to acknowledge

---

## ğŸ”§ DEVELOPMENT COMMANDS

```bash
# Frontend
cd frontend
npm install
npm run dev           # Development server
npm run build         # Production build
npm run lint          # Lint check
npm run test          # Run tests

# Backend
cd backend
pip install -r requirements.txt
uvicorn app.main:app --reload  # Development server
pytest                          # Run tests
alembic upgrade head           # Run migrations

# Docker
docker-compose up -d           # Start all services
docker-compose logs -f         # View logs
```

---

## ğŸ“š REFERENCES

### Existing Code to Integrate
- `live_monitoring/orchestrator/unified_monitor.py` - Main monitor
- `live_monitoring/core/signal_generator.py` - Signal generation
- `live_monitoring/orchestrator/checkers/` - All checker modules
- `core/data/ultimate_chartexchange_client.py` - ChartExchange API

### External Resources
- [TradingView Lightweight Charts](https://tradingview.github.io/lightweight-charts/)
- [shadcn/ui](https://ui.shadcn.com/)
- [FastAPI WebSockets](https://fastapi.tiangolo.com/advanced/websockets/)
- [TimescaleDB](https://www.timescale.com/)

---

## ğŸ’¡ PLUMBER NOTES

1. **Start with the WebSocket infrastructure** - Everything depends on real-time data
2. **Use the existing monitor output** - Don't reinvent signal generation
3. **Cache aggressively** - Redis is your friend
4. **Test with mock data first** - Don't hammer APIs during development
5. **Mobile-first design** - Many traders use tablets
6. **Error boundaries everywhere** - One widget crash shouldn't kill the dashboard
7. **Logging is critical** - You'll need it for debugging production issues

---

**ALPHA'S VISION:**
*"Bloomberg charges $24,000/year for a terminal that looks like it was designed in 1992. We're building something beautiful, intelligent, and FREE (or cheap). This is how we democratize institutional intelligence."* ğŸš€ğŸ’°ğŸ¯

---

**Document Version:** 1.0
**Last Updated:** December 17, 2024
**Author:** Zo (Alpha's AI)
